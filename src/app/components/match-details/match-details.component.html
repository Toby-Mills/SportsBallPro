<div class="container">
    <div class="pin-icon" (click)="toggleWakeLock()" *ngIf="showWakeLock">
        <span [ngClass]="isWakeLockActive ? 'material-icons' : 'material-icons-outlined'">push_pin</span>
    </div>
    <ng-container *ngIf="fixture.gameId; else noMatch">
        <div class="box wide-box fixture">
            <h1>{{this.fixture.game}}</h1>
            <div class="result">{{status.result}}</div>
            <div *ngIf="status.runsRequired !='NotOn'" class="runRequired">{{status.runsRequired}}</div>
        </div>
        
        <div *ngIf="status.tossWonByTeam" class="box wide-box toss">{{status.tossWonByTeam}} won the toss and decided to
            {{status.decidedTo}}
        </div>
        
        <!-- First Innings Team Scores -->
        <div class="box small-box card team-score-card" [class.selected]="viewingBattingInnings === '1-1'">
            <app-team-score 
                [teamNumber]="1" 
                [gameId]="actualGameId" 
                [inningsNumber]="1"
                [isSelected]="viewingBattingInnings === '1-1'"
                (cardClicked)="onTeamScoreClick($event)">
            </app-team-score>
        </div>
        <div class="box small-box card team-score-card" [class.selected]="viewingBattingInnings === '1-2'">
            <app-team-score 
                [teamNumber]="2" 
                [gameId]="actualGameId" 
                [inningsNumber]="1"
                [isSelected]="viewingBattingInnings === '1-2'"
                (cardClicked)="onTeamScoreClick($event)">
            </app-team-score>
        </div>
        
        <!-- Second Innings Team Scores (if exists) -->
        <div class="box small-box card team-score-card" [class.selected]="viewingBattingInnings === '2-1'" *ngIf="hasSecondInnings">
            <app-team-score 
                [teamNumber]="1" 
                [gameId]="actualGameId" 
                [inningsNumber]="2"
                [isSelected]="viewingBattingInnings === '2-1'"
                (cardClicked)="onTeamScoreClick($event)">
            </app-team-score>
        </div>
        <div class="box small-box card team-score-card" [class.selected]="viewingBattingInnings === '2-2'" *ngIf="hasSecondInnings">
            <app-team-score 
                [teamNumber]="2" 
                [gameId]="actualGameId" 
                [inningsNumber]="2"
                [isSelected]="viewingBattingInnings === '2-2'"
                (cardClicked)="onTeamScoreClick($event)">
            </app-team-score>
        </div>
        
        <div class="box wide-box innings-detail-label">Innings Detail</div><br>
        
        <div class="box small-box card">
            <app-batting-scorecard [inningsNumber]="currentInningsNumber" [teamNumber]="currentTeamNumber" [gameId]="actualGameId"></app-batting-scorecard>
        </div>
        <div class="box small-box card">
            <app-recent-balls [inningsNumber]="currentInningsNumber" [teamNumber]="currentTeamNumber" [gameId]="actualGameId"></app-recent-balls>
        </div>
        <div class="box small-box card">
            <app-bowling-scorecard [inningsNumber]="currentInningsNumber" [teamNumber]="currentTeamNumber === 1 ? 2 : 1" [gameId]="actualGameId"></app-bowling-scorecard>
        </div>
        <div class="box small-box card">
            <app-fall-of-wickets [inningsNumber]="currentInningsNumber" [teamNumber]="currentTeamNumber" [gameId]="actualGameId"></app-fall-of-wickets>
        </div>
        <div class="box small-box card run-comparison">
            <app-run-comparison [gameId]="actualGameId"></app-run-comparison>
        </div>
        <div class="box wide-box card ball-commentary-card">
            <app-ball-by-ball-commentary [inningsNumber]="currentInningsNumber" [teamNumber]="currentTeamNumber" [gameId]="actualGameId"></app-ball-by-ball-commentary>
        </div>
    </ng-container>
    <ng-template #noMatch>
        <div *ngIf="this.parameterGameKey == '' && !gameId" class="no-match">Please select a Match to load</div>
        <div *ngIf="this.parameterGameKey != '' || gameId" class="no-match">Loading match data...</div>
    </ng-template>
</div>